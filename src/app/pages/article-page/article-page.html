<div class="uk-container">
  <div *ngIf="message" class="uk-alert uk-alert-success">{{ message }}</div>
  <h2>Les articles</h2>

<!-- bouton qui affiche le formulaire d'ajout d'article-->
  <button class="uk-button uk-button-primary uk-width-1-1 uk-margin-medium-bottom" (click)="formVisible = !formVisible">
    {{ formVisible ? 'Exit' : 'Ajouter un article ?' }}
  </button>

<!-- formulaire d'ajout d'article-->
  <form *ngIf="formVisible" (ngSubmit)="ajouterArticle()" #formAjout="ngForm">
    <label for="title">Titre :</label>
    <input class="uk-width-1-1" type="text" id="title" name="title" [(ngModel)]="formAjoutArticle.title" required />
    <br>
    <label for="desc">Description :</label>
    <textarea class="uk-width-1-1" id="desc" name="desc" [(ngModel)]="formAjoutArticle.desc" required></textarea>
    <br>
    <label for="author">Auteur :</label>
    <input class="uk-width-1-1 uk-margin-medium-bottom" type="text" id="author" name="author" [(ngModel)]="formAjoutArticle.author" required />
    <br>
    <button class="uk-button uk-margin-medium-bottom sdv-article-card" type="submit" [disabled]="formAjout.invalid">Ajouter</button>
  </form>



<!-- bouton pour appeler l'API-->
  <button class="uk-button uk-button-primary uk-width-1-1 uk-margin-medium-bottom" (click)="onClickCallApi()">
    Appel API
  </button>







<!-- Affichage des articles-->
  <div class="uk-child-width-1-2@s uk-grid-match uk-margin-medium-bottom" uk-grid>

    <!-- boucle for pour creer les articles -->
    @for (article of articles; track article) {
      <div >
        <div class="uk-card uk-card-secondary uk-card-hover uk-card-body sdv-article-card"
           [ngStyle]="{ 'background-image': 'url(' + (article.imgPath ? article.imgPath : 'https://www.piggypet.it/wp-content/uploads/2023/08/Progetto-senza-titolo-2023-08-01T164036.734-870x563.jpg') + ')'
           , 'background-size' : 'cover', 'background-position': 'center' }">


        <div class="sdv-dark-overlay"></div>
        <div class="sdv-article-card-layer-2">


          <h3 class="uk-card-title" >{{ article.title }}</h3>
          <p>{{ article.desc }}</p>


          <!-- Lien vers la page de dÃ©tail -->
          <button [routerLink]="['/article', article.id]">l'article</button>

          <br>
          <!-- Lien vers la page de modification de l'article-->
          <button [routerLink]="['/modify', article.id]">Modifier</button>
          <!-- Bouton de suppr -->
          <button (click)="supprimerArticle(article.id)">Supp</button>

        </div>
        </div>
        </div>

    }

  </div>
</div>
